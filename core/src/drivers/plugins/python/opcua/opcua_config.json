[
    {
        "name": "opcua_server",
        "protocol": "OPC-UA",
        "config": {
            "server": {
                "name": "OpenPLC OPC UA Server",
                "application_uri": "urn:openplc:runtime:opcua",
                "product_uri": "urn:openplc:runtime:product",
                "endpoint_url": "opc.tcp://0.0.0.0:4840/openplc/opcua",
                "security_profiles": [
                    {
                        "name": "insecure",
                        "enabled": true,
                        "security_policy": "None",
                        "security_mode": "None",
                        "auth_methods": [
                            "Anonymous"
                        ]
                    },
                    {
                        "name": "signed",
                        "enabled": true,
                        "security_policy": "Basic256Sha256",
                        "security_mode": "Sign",
                        "auth_methods": [
                            "Username",
                            "Certificate"
                        ]
                    },
                    {
                        "name": "signed_encrypted",
                        "enabled": true,
                        "security_policy": "Basic256Sha256",
                        "security_mode": "SignAndEncrypt",
                        "auth_methods": [
                            "Username",
                            "Certificate"
                        ]
                    }
                ]
            },
            "security": {
                "server_certificate_strategy": "auto_self_signed",
                "server_certificate_custom": null,
                "server_private_key_custom": null,
                "trusted_client_certificates": [
                    {
                        "id": "engineer_client",
                        "pem": "-----BEGIN CERTIFICATE-----\nMIIC...snip...\n-----END CERTIFICATE-----\n"
                    },
                    {
                        "id": "scada_client",
                        "pem": "-----BEGIN CERTIFICATE-----\nMIIC...snip...\n-----END CERTIFICATE-----\n"
                    }
                ]
            },
            "users": [
                {
                    "type": "password",
                    "username": "viewer",
                    "password_hash": "$2b$12$aa...",
                    "role": "viewer"
                },
                {
                    "type": "password",
                    "username": "operator",
                    "password_hash": "$2b$12$bb...",
                    "role": "operator"
                },
                {
                    "type": "password",
                    "username": "engineer",
                    "password_hash": "$2b$12$cc...",
                    "role": "engineer"
                },
                {
                    "type": "certificate",
                    "certificate_id": "engineer_client",
                    "role": "engineer"
                }
            ],
            "address_space": {
                "namespace_uri": "urn:openplc:opcua:runtime",
                "namespace_index": 2,
                "variables": [
                    {
                        "node_id": "PLC.Inputs.Sensor1",
                        "browse_name": "Sensor1",
                        "display_name": "Digital Input Sensor1",
                        "datatype": "BOOL",
                        "initial_value": false,
                        "description": "Estado do sensor 1",
                        "index": 12,
                        "permissions": {
                            "viewer": "r",
                            "operator": "r",
                            "engineer": "rw"
                        }
                    },
                    {
                        "node_id": "PLC.Outputs.Motor1",
                        "browse_name": "Motor1",
                        "display_name": "Motor 1",
                        "datatype": "BOOL",
                        "initial_value": false,
                        "description": "Comando de sa√≠da para motor 1",
                        "index": 21,
                        "permissions": {
                            "viewer": "r",
                            "operator": "rw",
                            "engineer": "rw"
                        }
                    }
                ],
                "structures": [
                    {
                        "node_id": "PLC.Structs.DriveStatus",
                        "browse_name": "DriveStatus",
                        "display_name": "Drive Status",
                        "description": "Estado completo do inversor",
                        "fields": [
                            {
                                "name": "Speed",
                                "datatype": "REAL",
                                "initial_value": 0.0,
                                "index": 33,
                                "permissions": {
                                    "viewer": "r",
                                    "operator": "r",
                                    "engineer": "rw"
                                }
                            },
                            {
                                "name": "Torque",
                                "datatype": "REAL",
                                "initial_value": 0.0,
                                "index": 34,
                                "permissions": {
                                    "viewer": "r",
                                    "operator": "r",
                                    "engineer": "rw"
                                }
                            },
                            {
                                "name": "Alarm",
                                "datatype": "BOOL",
                                "initial_value": false,
                                "index": 35,
                                "permissions": {
                                    "viewer": "r",
                                    "operator": "rw",
                                    "engineer": "rw"
                                }
                            }
                        ]
                    }
                ],
                "arrays": [
                    {
                        "node_id": "PLC.Arrays.TemperatureHistory",
                        "browse_name": "TemperatureHistory",
                        "display_name": "HistoricoTemperatura",
                        "datatype": "REAL",
                        "length": 100,
                        "initial_value": 0.0,
                        "index": 50,
                        "permissions": {
                            "viewer": "r",
                            "operator": "r",
                            "engineer": "rw"
                        }
                    }
                ]
            }
        }
    }
]